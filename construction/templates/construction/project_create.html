{% extends 'construction/base.html' %}

{% block title %}Create Project - Construction Management{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <h2 style="text-align: center; margin-bottom: 30px; color: #333;">➕ Create New Construction Project</h2>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div class="form-group">
                <label for="name">🏗️ Project Name:</label>
                <input type="text" id="name" name="name" required 
                       placeholder="e.g., Downtown Office Complex">
            </div>
            
            <div class="form-group">
                <label for="location">📍 Location:</label>
                <input type="text" id="location" name="location" required 
                       placeholder="e.g., 123 Main St, New York, NY">
            </div>
        </div>
        
        <div class="form-group">
            <label for="description">📝 Description:</label>
            <textarea id="description" name="description" required 
                     placeholder="Detailed description of the construction project..."></textarea>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div class="form-group">
                <label for="start_date">📅 Start Date:</label>
                <input type="date" id="start_date" name="start_date" required>
            </div>
            
            <div class="form-group">
                <label for="end_date">🏁 End Date:</label>
                <input type="date" id="end_date" name="end_date" required>
            </div>
            
            <div class="form-group">
                <label for="budget">💰 Budget ($):</label>
                <input type="number" id="budget" name="budget" step="0.01" min="0" required 
                       placeholder="e.g., 1000000.00">
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div class="form-group">
                <label for="status">📊 Status:</label>
                <select id="status" name="status" required>
                    <option value="Planning">🗓️ Planning</option>
                    <option value="In Progress">🔄 In Progress</option>
                    <option value="Completed">✅ Completed</option>
                    <option value="On Hold">⏸️ On Hold</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="priority">⚡ Priority:</label>
                <select id="priority" name="priority" required>
                    <option value="Low">🟢 Low</option>
                    <option value="Medium" selected>🟡 Medium</option>
                    <option value="High">🟠 High</option>
                    <option value="Critical">🔴 Critical</option>
                </select>
            </div>
        </div>
        
        <div class="form-group">
            <label for="document">📄 Project Document (Optional):</label>
            <input type="file" id="document" name="document" 
                   accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png">
            <small style="color: #666; display: block; margin-top: 5px;">
                📁 File will be uploaded to AWS S3. Supported formats: PDF, DOC, DOCX, TXT, JPG, PNG
            </small>
        </div>
        
        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
            <button type="submit" class="btn">✅ Create Project</button>
            <a href="{% url 'project_list' %}" class="btn" style="background: #6c757d;">↩️ Cancel</a>
        </div>
    </form>
</div>

<div style="margin-top: 40px; padding: 20px; background: #e8f5e8; border-radius: 10px;">
    <h4 style="color: #388e3c; margin-bottom: 10px;">🚀 What happens when you create a project?</h4>
    <ul style="color: #333; line-height: 1.8;">
        <li>📧 <strong>Email notification</strong> sent via AWS SES</li>
        <li>🔔 <strong>SNS notification</strong> for high-priority projects</li>
        <li>📁 <strong>Document upload</strong> to AWS S3 (if provided)</li>
        <li>📊 <strong>Activity logged</strong> to AWS CloudWatch</li>
        <li>💾 <strong>Data stored</strong> in SQLite3 database</li>
    </ul>
</div>

<script>
// Set minimum date to today
document.getElementById('start_date').min = new Date().toISOString().split('T')[0];
document.getElementById('end_date').min = new Date().toISOString().split('T')[0];

// Ensure end date is after start date
document.getElementById('start_date').addEventListener('change', function() {
    document.getElementById('end_date').min = this.value;
});
</script>
{% endblock %}
